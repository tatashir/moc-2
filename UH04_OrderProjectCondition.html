<!--/*
 //******************************************************
 //システム名 電子入札コアシステム
 //サブシステム名 アップロードシステム
 //
 // 調達案件検索（UH04_OrderProjectCondition.html）
 // @author  NEC
 // @version 1.0, xxxx.xx.xx, 新規作成<BR>
 //
 //******************************************************
*/-->
<!DOCTYPE html>
<html
  lang="ja"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layout/UC01_OrdLayout}"
>
  <head>
    <title>調達案件検索</title>

    <script th:inline="javascript">
      /**
       * 検索条件初期化処理
       **/
      function conditionInit() {
        var post = /*[[${#authentication.principal.postType}]]*/ null;
        var targetObj; // target object
        // officelist
        if (post == "0") {
          targetObj = document.getElementById("officeNo");
          targetObj.selectedIndex = 0;
        }
        // bidMethodlist
        targetObj = document.getElementById("bidMethodNo");
        targetObj.selectedIndex = 0;
        // projectNo
        targetObj = document.getElementById("projectNo");
        targetObj.value = "";
        // projectName
        targetObj = document.getElementById("projectName");
        targetObj.value = "";
        // publishingStartTime
        targetObj = document.getElementById("publishingStartTime");
        targetObj.value = "";
        // publishingEndTime
        targetObj = document.getElementById("publishingEndTime");
        targetObj.value = "";
        // message rmove
        removeElementById("message");
      }
    </script>
  </head>

  <body>
    <div class="container" layout:fragment="contents">
      <div class="breadcrumbs">
        <div class="row">
          <ul>
            <li>調達案件検索</li>
          </ul>
        </div>
      </div>
      <!-- breadcrumbs -->

      <div class="screen-title">
        <div class="row">
          <div class="col-12">
            <h2>調達案件検索</h2>
          </div>
        </div>
      </div>
      <!-- screen-title -->

      <div class="bottom-area">
        <div class="search-form">
          <form
            role="form"
            th:action="@{/projects}"
            method="get"
            th:object="${projectConditionForm}"
          >
            <div class="row justify-content-sm-center">
              <div class="col-md-8">
                <table class="form-table">
                  <tr>
                    <th>調達機関</th>
                    <td>
                      <div
                        th:text="${#authentication.principal.organName}"
                      ></div>
                      <input
                        type="hidden"
                        name="organNo"
                        th:value="${#authentication.principal.organNo}"
                      />
                    </td>
                  </tr>
                  <tr>
                    <th>部局</th>
                    <td>
                      <div
                        th:text="${#authentication.principal.departmentName}"
                      ></div>
                      <input
                        type="hidden"
                        name="departmentNo"
                        th:value="${#authentication.principal.departmentNo}"
                      />
                    </td>
                  </tr>
                  <tr>
                    <th>事務所</th>
                    <td th:if="${#authentication.principal.postType == '1'}">
                      <div
                        th:text="${#authentication.principal.officeName}"
                      ></div>
                      <input
                        type="hidden"
                        name="officeNo"
                        th:value="${#authentication.principal.officeNo}"
                      />
                    </td>
                    <td th:if="${#authentication.principal.postType == '0'}">
                      <select id="officeNo" name="officeNo">
                        <option
                          th:each="office : ${officeList}"
                          th:object="${office}"
                          th:value="*{officeNo}"
                          th:text="*{officeName}"
                          th:selected="${office.officeNo == projectConditionForm.officeNo}"
                        ></option>
                      </select>
                    </td>
                  </tr>
                  <tr>
                    <th>工事／コンサル区分</th>
                    <td th:if="${#authentication.principal.projectType == '0'}">
                      工事
                      <input
                        type="hidden"
                        name="projectType"
                        th:value="${#authentication.principal.projectType}"
                      />
                    </td>
                    <td th:if="${#authentication.principal.projectType == '1'}">
                      コンサル
                      <input
                        type="hidden"
                        name="projectType"
                        th:value="${#authentication.principal.projectType}"
                      />
                    </td>
                    <td th:if="${#authentication.principal.projectType == '2'}">
                      工事／コンサル
                      <input
                        type="hidden"
                        name="projectType"
                        th:value="${#authentication.principal.projectType}"
                      />
                    </td>
                  </tr>
                  <tr>
                    <th>入札方式</th>
                    <td>
                      <select id="bidMethodNo" name="bidMethodNo">
                        <option
                          th:each="bid : ${bidMethodList}"
                          th:object="${bid}"
                          th:value="*{bidMethodNo}"
                          th:text="*{bidMethodName}"
                          th:selected="${bid.bidMethodNo == projectConditionForm.bidMethodNo}"
                        ></option>
                      </select>
                    </td>
                  </tr>
                  <tr>
                    <th>調達案件番号</th>
                    <td>
                      <input
                        id="projectNo"
                        name="projectNo"
                        type="text"
                        maxlength="60"
                        th:field="*{projectNo}"
                      />
                    </td>
                  </tr>
                  <tr>
                    <th>調達案件名称</th>
                    <td>
                      <input
                        id="projectName"
                        name="projectName"
                        type="text"
                        maxlength="256"
                        th:value="${projectConditionForm.projectName}"
                      />
                    </td>
                  </tr>
                  <tr>
                    <th>公告日／公示日</th>
                    <td>
                      <div class="between-date-input">
                        <div>
                          <input
                            id="publishingStartTime"
                            name="publishingStartTime"
                            type="text"
                            th:value="${projectConditionForm.publishingStartTime}"
                          />
                          から
                        </div>
                        <div>
                          <input
                            id="publishingEndTime"
                            name="publishingEndTime"
                            type="text"
                            th:value="${projectConditionForm.publishingEndTime}"
                          />
                          まで
                        </div>
                      </div>
                    </td>
                  </tr>
                </table>
              </div>
            </div>

            <div class="row justify-content-sm-center">
              <div class="col-md-8">
                <div class="row justify-content-between">
                  <div class="col-6 align-left">
                    <input
                      type="submit"
                      name="search"
                      value="検索"
                      class="btn"
                    />
                  </div>
                  <div class="col-6 align-right">
                    <input
                      type="button"
                      name=""
                      value="クリア"
                      class="btn"
                      onclick="conditionInit();"
                    />
                  </div>
                </div>
              </div>
            </div>

            <div
              class="row error"
              id="message"
              th:if="${#fields.hasAnyErrors()}"
            >
              <div class="col-12 align-center">
                <ul>
                  <li
                    th:if="${#fields.hasErrors('projectNo')}"
                    th:errors="*{projectNo}"
                  ></li>
                  <li
                    th:if="${#fields.hasErrors('publishingStartTime')}"
                    th:each="err : ${#fields.errors('*{publishingStartTime}')}"
                    th:text="${err}"
                  ></li>
                  <li
                    th:if="${#fields.hasErrors('validFormatStartTime')}"
                    th:errors="*{validFormatStartTime}"
                  ></li>
                  <li
                    th:if="${#fields.hasErrors('validStartTime')}"
                    th:errors="*{validStartTime}"
                  ></li>
                  <li
                    th:if="${#fields.hasErrors('publishingEndTime')}"
                    th:each="err : ${#fields.errors('*{publishingEndTime}')}"
                    th:text="${err}"
                  ></li>
                  <li
                    th:if="${#fields.hasErrors('validFormatEndTime')}"
                    th:errors="*{validFormatEndTime}"
                  ></li>
                  <li
                    th:if="${#fields.hasErrors('validEndTime')}"
                    th:errors="*{validEndTime}"
                  ></li>
                  <li
                    th:if="${#fields.hasErrors('dateCorrelation')}"
                    th:errors="*{dateCorrelation}"
                  ></li>
                </ul>
              </div>
            </div>
          </form>
        </div>
        <!-- search-form -->
      </div>
      <!-- bottom-area -->
    </div>
    <!-- container -->
  </body>
</html>
